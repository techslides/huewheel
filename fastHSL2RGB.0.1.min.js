/*
 *	Fast HSL2RGB version 0.1
 *
 *	By Ken Fyrstenberg Nilsen
 *	Abdias Software (C) 2013
 *	http://abdiassoftware.com/
 *
 *	License: GPL-3.0
*/
function FastHSL2RGB(n){n=typeof n==="boolean"?n:!1;var m=this,p,d=n?2:4,e=1/d,j=360/d,l=256/d,k=l,b=new Array(j),q="onmessage=function(d){function k(x,D,z){var C,o,e,B,A;x/=360;if(D===0){C=o=e=z}else{function y(h,s,E){E%=1;if(E<0.1666667){return h+(s-h)*E*6}if(E<0.5){return s}if(E<0.6666667){return h+(s-h)*(0.6666667-E)*6}return h}B=z<0.5?z*(1+D):z+D-z*D;A=2*z-B;C=y(A,B,x+0.3333333);o=y(A,B,x);e=y(A,B,x-0.3333333)}b[a++]=C*255;b[a++]=o*255;b[a++]=e*255}var w=new Date().getTime(),f=parseInt(d.data,10),g=1/f,p=360/f,r=256/f,q=r,c=new ArrayBuffer(p*r*q*3),b=new Uint8ClampedArray(c),a=0,j=0,v,m,i,u,n=1/r,l=1/q;for(;j<p;j++){i=j*f;for(v=0;v<r;v++){u=v*n;for(m=0;m<q;m++){k(i,u,m*l)}}}var t={cube:c,time:(new Date().getTime()-w)};postMessage(t,[t.cube])};",o;m.time=-1;this.hsl2rgb=this.hsl2rgbHQ=i;if(typeof window.Array!=="undefined"&&typeof window.Worker!=="undefined"){try{p=new Worker(h());p.onmessage=function(u){clearTimeout(o);m.time=u.data.time;var t=new Uint8Array(u.data.cube),r=0;for(var w=0,v,x=1/k;w<j;w++){b[w]=new Array(l);for(var A=0,z;A<l;A++){b[w][A]=new Array(k);for(var y=0;y<k;y++){b[w][A][y]={r:t[r],g:t[r+1],b:t[r+2]};r+=3}}}m.hsl2rgb=g};o=setTimeout(f,d===2?8000:2000);p.postMessage(d);function f(){p.terminate();a()}}catch(c){a()}}else{a();m.hsl2rgb=g;m.time=0}function h(){var r=new Blob([q],{type:"text/javascript"});return window.URL.createObjectURL(r)}function g(r,u,t){r=((r%360)*e)|0;u=(63*u)|0%l;t=(63*t)|0%k;return b[r][u][t]}function i(v,B,x){var A,u,t,z,y;v/=360;if(B===0){A=u=t=x}else{function w(r,s,C){C%=1;if(C<0.1666667){return r+(s-r)*C*6}if(C<0.5){return s}if(C<0.6666667){return r+(s-r)*(0.6666667-C)*6}return r}z=x<0.5?x*(1+B):x+B-x*B;y=2*x-z;A=w(y,z,v+0.3333333);u=w(y,z,v);t=w(y,z,v-0.3333333)}return{r:(A*255+0.5)|0,g:(u*255+0.5)|0,b:(t*255+0.5)|0}}function a(){for(var t=0,r,u=1/k;t<j;t++){r=t*d;b[t]=new Array(l);for(var x=0,w;x<l;x++){w=x/l;b[t][x]=new Array(k);for(var v=0;v<k;v++){b[t][x][v]=i(r,w,v*u)}}}m.hsl2rgb=g;m.time=0}};